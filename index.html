<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Malla Curricular – Ingeniería Industrial UIS</title>

<style>
body{
  margin:0;
  padding:20px;
  font-family:"Segoe UI", Tahoma, sans-serif;
  background:#f2f5f9;
}

.header{
  display:flex;
  align-items:center;
  gap:20px;
  margin-bottom:20px;
}

.header img{
  height:90px;
}

.header h1{
  color:#1f3c88;
  margin:0;
}

/* ===== GRID ===== */
.grid{
  display:grid;
  grid-template-columns: repeat(10, 260px);
  gap:16px;
  overflow-x:auto;
  padding-bottom:20px;
}

/* ===== SEMESTER ===== */
.semester{
  background:#ffffff;
  border-radius:14px;
  padding:12px;
  box-shadow:0 8px 18px rgba(0,0,0,.08);
}

.semester h2{
  background:#1f3c88;
  color:#fff;
  text-align:center;
  padding:8px;
  border-radius:10px;
  font-size:14px;
  margin-top:0;
}

/* ===== COURSE ===== */
.course{
  background:#d9f0ff;
  border-radius:12px;
  padding:10px;
  margin-bottom:10px;
  font-size:13px;
  cursor:pointer;
  transition:.2s;
  border-left:6px solid #3498db;
}

.course:hover{
  transform:scale(1.02);
}

.course.approved{
  background:#d4f7dc;
  border-left:6px solid #2ecc71;
  color:#145a32;
  font-weight:600;
}

.course.locked{
  background:#eeeeee;
  border-left:6px solid #999;
  color:#888;
  cursor:not-allowed;
}

/* ===== MODAL ===== */
.modal-bg{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.55);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:9999;
}

.modal{
  background:#fff;
  padding:22px;
  border-radius:14px;
  width:90%;
  max-width:420px;
  box-shadow:0 15px 35px rgba(0,0,0,.35);
}

.modal h3{
  margin-top:0;
  color:#1f3c88;
}

.modal ul{
  padding-left:18px;
}

.modal button{
  margin-top:14px;
  background:#1f3c88;
  color:#fff;
  border:none;
  padding:8px 18px;
  border-radius:8px;
  cursor:pointer;
}
</style>
</head>

<body>

<!-- ===== HEADER ===== -->
<div class="header">
  <!-- Cambia por tu imagen o URL -->
  <img src="escudo_uis.png" alt="Escudo UIS">
  <h1>Ingeniería Industrial – UIS</h1>
</div>

<div class="grid" id="grid"></div>

<!-- ===== MODAL PRERREQUISITOS ===== -->
<div class="modal-bg" id="modalBg" onclick="cerrarModal()">
  <div class="modal" onclick="event.stopPropagation()">
    <h3 id="modalTitulo"></h3>
    <p>No puedes aprobar esta materia porque faltan:</p>
    <ul id="modalLista"></ul>
    <button onclick="cerrarModal()">Cerrar</button>
  </div>
</div>

<script>
const malla = [
{sem:1,c:[
{id:'cal1',n:'Cálculo I',cr:4},
{id:'alg1',n:'Álgebra Lineal I',cr:4},
{id:'geo',n:'Geometría Descriptiva',cr:4},
{id:'qui',n:'Química Básica',cr:4},
{id:'len',n:'Taller de Lenguaje',cr:3},
{id:'uis',n:'Cátedra UIS',cr:0}
]},
{sem:2,c:[
{id:'cal2',n:'Cálculo II',cr:4,req:['cal1']},
{id:'fis1',n:'Física I',cr:4,req:['cal1']},
{id:'bio',n:'Biología para Ingenieros',cr:2},
{id:'dep',n:'Cultura Física y Deporte',cr:1},
{id:'comp',n:'Estructuras Computacionales',cr:3},
{id:'intro',n:'Introducción a la Ing. Industrial',cr:3}
]},
{sem:3,c:[
{id:'mec',n:'Mecánica Analítica',cr:4,req:['fis1']},
{id:'cal3',n:'Cálculo III',cr:4,req:['cal2']},
{id:'fis2',n:'Física II',cr:4,req:['fis1','cal2']},
{id:'ing1',n:'Inglés I',cr:4},
{id:'eco',n:'Entorno Económico',cr:3},
{id:'ctx1',n:'Asignatura de Contexto I',cr:2}
]},
{sem:4,c:[
{id:'ecu',n:'Ecuaciones Diferenciales',cr:4,req:['cal3']},
{id:'termo',n:'Termodinámica I',cr:4,req:['fis2']},
{id:'fis3',n:'Física III',cr:4,req:['fis2']},
{id:'ing2',n:'Inglés II',cr:4,req:['ing1']},
{id:'cont',n:'Gestión Contable',cr:3}
]},
{sem:5,c:[
{id:'elec',n:'Electricidad y Electrónica Básica',cr:3,req:['fis3']},
{id:'mat',n:'Ciencia de los Materiales',cr:3},
{id:'est1',n:'Estadística I',cr:3},
{id:'cost',n:'Costos',cr:3},
{id:'dir1',n:'Dirección Empresarial',cr:3},
{id:'ctx2',n:'Asignatura de Contexto II',cr:2}
]},
{sem:6,c:[
{id:'est2',n:'Estadística II',cr:3,req:['est1']},
{id:'io1',n:'Investigación de Operaciones I',cr:3,req:['est1']},
{id:'proc',n:'Procesos Industriales',cr:3},
{id:'ecoing',n:'Ingeniería Económica',cr:3},
{id:'mark',n:'Principios de Mercadeo',cr:3},
{id:'dir2',n:'Dirección Empresarial II',cr:3,req:['dir1']}
]},
{sem:7,c:[
{id:'est3',n:'Estadística III',cr:3,req:['est2']},
{id:'io2',n:'Investigación de Operaciones II',cr:3,req:['io1']},
{id:'op1',n:'Dirección de Operaciones I',cr:3},
{id:'fin',n:'Finanzas y Presupuestos',cr:3},
{id:'invmer',n:'Investigación de Mercados',cr:3}
]},
{sem:8,c:[
{id:'sis',n:'Sistemas de Información',cr:3},
{id:'calidad',n:'Ingeniería de Calidad',cr:3},
{id:'op2',n:'Dirección de Operaciones II',cr:3,req:['op1']},
{id:'sst',n:'Seguridad y Salud en el Trabajo',cr:3},
{id:'th',n:'Talento Humano',cr:3},
{id:'proy',n:'Formulación y Evaluación de Proyectos',cr:3}
]},
{sem:9,c:[
{id:'tg1',n:'Trabajo de Grado I',cr:3},
{id:'log',n:'Logística Integral',cr:3},
{id:'dsp',n:'Diseño de Sistemas Productivos',cr:3},
{id:'el1',n:'Electiva I',cr:3},
{id:'el2',n:'Electiva II',cr:3}
]},
{sem:10,c:[
{id:'tg2',n:'Trabajo de Grado II',cr:7,req:['tg1']},
{id:'el3',n:'Electiva III',cr:3},
{id:'el4',n:'Electiva IV',cr:3}
]}
];

let progreso = JSON.parse(localStorage.getItem("mallaUIS")) || {};

function abrirModal(nombre, faltantes){
  document.getElementById("modalTitulo").textContent = nombre;
  const ul = document.getElementById("modalLista");
  ul.innerHTML="";
  faltantes.forEach(f=>{
    const li=document.createElement("li");
    li.textContent=f;
    ul.appendChild(li);
  });
  document.getElementById("modalBg").style.display="flex";
}

function cerrarModal(){
  document.getElementById("modalBg").style.display="none";
}

function render(){
  const grid=document.getElementById("grid");
  grid.innerHTML="";
  malla.forEach(s=>{
    const col=document.createElement("div");
    col.className="semester";
    col.innerHTML=`<h2>Semestre ${s.sem}</h2>`;
    s.c.forEach(m=>{
      const div=document.createElement("div");
      div.className="course";
      div.textContent=`${m.n} (${m.cr} cr)`;

      const req=m.req||[];
      const falt=req.filter(r=>!progreso[r]);

      if(progreso[m.id]) div.classList.add("approved");
      if(falt.length && !progreso[m.id]) div.classList.add("locked");

      div.onclick=()=>{
        if(progreso[m.id]){
          delete progreso[m.id];
        }else{
          if(falt.length){
            abrirModal(m.n, falt.map(x=>x.toUpperCase()));
            return;
          }
          progreso[m.id]=true;
        }
        localStorage.setItem("mallaUIS",JSON.stringify(progreso));
        render();
      };

      col.appendChild(div);
    });
    grid.appendChild(col);
  });
}

render();
</script>
</body>
</html>
